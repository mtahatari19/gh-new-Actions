name: Deployment Exercise 2
on: push
jobs:
    lint:
        runs-on:  [self-hosted, Linux, ARM, raspberrypi]
        steps:
            - name: Get code
              uses: actions/checkout@v3 
            - name: Install dependcies 
              run: npm ci 
            - name: Lint 
              run: npm run lint
    test:
           needs: lint        
           runs-on:  [self-hosted, Linux, ARM, raspberrypi]
           steps:
            - name: Get code
              uses: actions/checkout@v3 
            - name: Install dependcies 
              run: npm ci 
            - name: Test code 
              run : npm run test
    deploy:
        needs: test   
        runs-on:  [self-hosted, Linux, ARM, raspberrypi]
        steps:
            - name: Get code
              uses: actions/checkout@v3 
            - name: Install dependcies 
              run: npm ci 
            - name: Lint 
              run: npm run lint
            - name: Test code 
              run : npm run test
            - name: Build code
              run: npm run build
            - name: Deploy code 
              run: echo "Deploying..."
              
